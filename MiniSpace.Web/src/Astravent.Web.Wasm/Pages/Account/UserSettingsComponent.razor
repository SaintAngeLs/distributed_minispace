@page "/user-settings"
@inject IIdentityService IdentityService
@using MudBlazor

<MudText Typo="Typo.h4" GutterBottom="true">User Settings</MudText>
@if (IsLoading)
{
    <MudProgressCircular Indeterminate="true" Color="Color.Primary" />
}
else
{
    <MudExpansionPanels>

        <!-- Personal Information Settings -->
        <MudExpansionPanel IsInitiallyExpanded="true" Text="Personal Information Settings">
            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.CreatedAtVisibility" Label="Created At Visibility" 
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.DateOfBirthVisibility" Label="Date of Birth Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.ContactEmailVisibility" Label="Contact Email Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.PhoneNumberVisibility" Label="Phone Number Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
            </MudGrid>
        </MudExpansionPanel>

        <!-- Events and Work Settings -->
        <MudExpansionPanel IsInitiallyExpanded="true" Text="Events and Work Settings">
            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.InterestedInEventsVisibility" Label="Interested In Events Visibility" 
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.SignedUpEventsVisibility" Label="Signed Up Events Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.EducationVisibility" Label="Education Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.WorkPositionVisibility" Label="Work Position Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
            </MudGrid>
        </MudExpansionPanel>

        <!-- Connection and Posts Settings -->
        <MudExpansionPanel IsInitiallyExpanded="false" Text="Connection and Posts Settings">
            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.ConnectionVisibility" Label="Connection Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.FollowersVisibility" Label="Followers Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.FollowingVisibility" Label="Following Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.MyPostsVisibility" Label="My Posts Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.ConnectionsPostsVisibility" Label="Connections' Posts Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.MyRepostsVisibility" Label="My Reposts Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.RepostsOfMyConnectionsVisibility" Label="Reposts Of My Connections Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
            </MudGrid>
        </MudExpansionPanel>

        <!-- Organizations Settings -->
        <MudExpansionPanel IsInitiallyExpanded="false" Text="Organization Settings">
            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.OrganizationIAmCreatorVisibility" Label="Organizations I Am Creator Of Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="Visibility" @bind-Value="AvailableSettingsDto.OrganizationIFollowVisibility" Label="Organizations I Follow Visibility"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (Visibility visibility in Enum.GetValues(typeof(Visibility)))
                        {
                            <MudSelectItem Value="@visibility">@visibility</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
            </MudGrid>
        </MudExpansionPanel>

        <!-- Interface Settings -->
        <MudExpansionPanel IsInitiallyExpanded="false" Text="Interface Settings">
            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudSelect T="PreferredLanguage" @bind-Value="AvailableSettingsDto.PreferredLanguage" Label="Preferred Language" HelperText="Preferred language for the interface"
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (PreferredLanguage language in Enum.GetValues(typeof(PreferredLanguage)))
                        {
                            <MudSelectItem Value="@language">@language</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="FrontendVersion" @bind-Value="AvailableSettingsDto.FrontendVersion" Label="Frontend Version" 
                        HelperText="Choose the frontend display mode (Auto, Dark, Light, etc.) that best suits your preference." 
                        Margin="Margin.Dense" AdornmentIcon="@Icons.Material.Filled.KeyboardArrowDown" AdornmentColor="Color.Primary">
                        @foreach (FrontendVersion version in Enum.GetValues(typeof(FrontendVersion)))
                        {
                            <MudSelectItem Value="@version">@version</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
            </MudGrid>
        </MudExpansionPanel>
    </MudExpansionPanels>

    <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@SaveUserSettingsAsync">Save Settings</MudButton>
}

@code {
    [Parameter] public bool IsLoading { get; set; }
    [Parameter] public AvailableSettingsDto AvailableSettingsDto { get; set; }
    [Parameter] public EventCallback SaveUserSettingsAsync { get; set; }
}
