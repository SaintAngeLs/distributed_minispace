@page "/events/{EventDto.Id}/details"
@using MiniSpacePwa.Models.Events
@using Radzen
@using MiniSpacePwa.DTO
@using MiniSpacePwa.Areas.Events
@using MiniSpacePwa.Areas.Identity
@inject NavigationManager NavigationManager
@inject DialogService DialogService
@inject IIdentityService IdentityService
@inject IEventsService EventsService

<RadzenStack Gap="1rem">
    <RadzenFieldset>
        <HeaderTemplate>
            <RadzenStack Gap="0" Orientation="Orientation.Horizontal">
                <RadzenIcon Icon="account_box" class="me-1"/>
                <b>Basic info</b>
            </RadzenStack>
        </HeaderTemplate>
        <ChildContent>
            <RadzenStack Gap="2rem">
                <RadzenRow Size="12">
                    <RadzenColumn Size="6">
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Organizer name</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Organizer.Name)</b></RadzenText>
        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Organization</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Organizer.OrganizationName)</b></RadzenText>
                    </RadzenColumn>
                    
                    <RadzenColumn Size="6">
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-mb-0">Organizer email</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Organizer.Email)</b></RadzenText>
                        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-mb-0">Category</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Category)</b></RadzenText>                        
                    </RadzenColumn>
                </RadzenRow>
        
                <RadzenRow AlignItems="AlignItems.Center">
                    <RadzenColumn Size="12" SizeMD="12">
        
                    </RadzenColumn>
                </RadzenRow>
            </RadzenStack>
        </ChildContent>
    </RadzenFieldset>
    
    <RadzenFieldset>
        <HeaderTemplate>
            <RadzenStack Gap="0" Orientation="Orientation.Horizontal">
                <RadzenIcon Icon="event" class="me-1"/>
                <b>Dates</b>
            </RadzenStack>  
        </HeaderTemplate>
        <ChildContent>
            <RadzenStack Gap="2rem">
                <RadzenRow Size="12">
                    <RadzenColumn Size="6">
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Start date</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.StartDate.ToLocalTime().ToString(dateFormat))</b></RadzenText>
                        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Status</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Status)</b></RadzenText>
                    </RadzenColumn>
                    
                    <RadzenColumn Size="6">
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">End date</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.EndDate.ToLocalTime().ToString(dateFormat))</b></RadzenText>
                        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Publish date</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.PublishDate.ToLocalTime().ToString(dateFormat))</b></RadzenText>
                    </RadzenColumn>
                </RadzenRow>
        
                <RadzenRow AlignItems="AlignItems.Center">
                    <RadzenColumn Size="12" SizeMD="12">
        
                    </RadzenColumn>
                </RadzenRow>
            </RadzenStack>
        </ChildContent>
    </RadzenFieldset>    
    
    <RadzenFieldset>
        <HeaderTemplate>
            <RadzenStack Gap="0" Orientation="Orientation.Horizontal">
                <RadzenIcon Icon="account_balance" class="me-1"/>
                <b>Address</b>
            </RadzenStack>
        </HeaderTemplate>
        <ChildContent>
            <RadzenStack Gap="2rem">
                <RadzenRow Size="12">
                    <RadzenColumn Size="6">
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Building name</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Location.BuildingName)</b></RadzenText>
                        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Building number</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Location.BuildingNumber)</b></RadzenText>
                        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">City</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Location.City)</b></RadzenText>
                    </RadzenColumn>
                    
                    <RadzenColumn Size="6">
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Street</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Location.Street)</b></RadzenText>
                        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Apartment number</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Location.ApartmentNumber)</b></RadzenText>
                        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Zip code</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Location.ZipCode)</b></RadzenText>
                    </RadzenColumn>
                </RadzenRow>
        
                <RadzenRow AlignItems="AlignItems.Center">
                    <RadzenColumn Size="12" SizeMD="12">
        
                    </RadzenColumn>
                </RadzenRow>
            </RadzenStack>
        </ChildContent>
    </RadzenFieldset>    
    
    <RadzenFieldset>
        <HeaderTemplate>
            <RadzenStack Gap="0" Orientation="Orientation.Horizontal">
                <RadzenIcon Icon="assessment" class="me-1"/>
                <b>Numbers</b>
            </RadzenStack>  
        </HeaderTemplate>
        <ChildContent>
            <RadzenStack Gap="2rem">
                <RadzenRow Size="12">
                    <RadzenColumn Size="6">
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Number of interested students</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.InterestedStudents)</b></RadzenText>
                        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Capacity</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Capacity)</b></RadzenText>
                    </RadzenColumn>
                    
                    <RadzenColumn Size="6">
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Number of signed up students</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.SignedUpStudents)</b></RadzenText>
                        
                        <RadzenText TextStyle="TextStyle.Body2" class="rz-display-flex rz-mt-3 rz-my-0">Fee</RadzenText>
                        <RadzenText TextStyle="TextStyle.H6"><b>@(EventDto.Fee)</b></RadzenText>
                    </RadzenColumn>
                </RadzenRow>
        
                <RadzenRow AlignItems="AlignItems.Center">
                    <RadzenColumn Size="12" SizeMD="12">
        
                    </RadzenColumn>
                </RadzenRow>
            </RadzenStack>
        </ChildContent>
    </RadzenFieldset>
    
    <RadzenStack Gap="1rem" Orientation="Orientation.Vertical" JustifyContent="JustifyContent.SpaceBetween" Style="height: 100%;">
        <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" Gap="0.5rem">
            <RadzenButton Click="@(() => DialogService.Close(true))" Variant="Variant.Flat" Text="Close" Style="width: 120px"/>
        </RadzenStack>
    </RadzenStack>
</RadzenStack>

@code {
    [Parameter]
    public EventDto EventDto { get; set; }

    private const string dateFormat = "dd/MM/yyyy HH:mm";
    
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
    }
}
